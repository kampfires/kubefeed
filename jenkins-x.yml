buildPack: docker-helm
pipelineConfig:
  pipelines:
    pullRequest:
      build:
        replace: true
        steps:
        - command: echo 'This pipeline will now execute "kubectl apply -f manifests/" to declaratively apply any diffs in manifests/*.yaml to the targeted kubernetes cluster '
        steps:
        - command: git clone https://github.com/kampfires/kubefeed.git
          name: clone-app-git-directory
        steps:
        - command: cd kubefeed
          name: cd-app-git-directory
        steps:
        - command: kubectl apply -f manifests/
          name: kubectl-apply-f-manifests
    release:
      setVersion:
        steps:
          - sh: jx step next-version --use-git-tag-only --tag
            name: tag-with-new-version
      build:
        replace: true
        steps:
        - command: echo "This template does not build anything"
      promote:
        replace: true
        steps:
        - command: echo "This template does not need promotion"
